<section class="py-16 md:py-24 bg-black text-white px-4 md:px-6">
  <div class="max-w-7xl mx-auto px-4">
    <!-- Section Title -->
    <div class="text-center mb-12 md:mb-16">
      <div class="flex items-center justify-center space-x-3 mb-4">
        <span class="material-symbols-outlined text-cyan-500 text-3xl">workspace_premium</span>
      </div>
      <h3 class="text-2xl md:text-4xl lg:text-5xl font-black uppercase tracking-tight">
        Niveles y <span class="text-cyan-500">Ganancias</span>
      </h3>
      <p class="text-gray-400 mt-3 max-w-2xl mx-auto text-sm md:text-base">
        Descubre cuánto puedes ganar con nuestro sistema de referidos. 
        ¡Es tan fácil como invitar amigos y comenzar a generar ingresos!
      </p>
    </div>

    <!-- Tiers Grid - Dark Theme with Cyan Accents -->
    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-3 md:gap-4">
      @for (tier of formattedTiers(); track tier.name) {
        <button 
          (click)="selectTier(tier)"
          class="group relative bg-zinc-900/60 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 text-left border border-zinc-800/80 hover:border-cyan-500/60 hover:bg-zinc-800/80 transition-all duration-300 hover:-translate-y-1 sm:hover:-translate-y-2 overflow-hidden"
        >
          <!-- Background Glow Effect -->
          <div class="absolute inset-0 bg-gradient-to-br {{ tier.bgGradient }} opacity-0 group-hover:opacity-15 transition-opacity duration-300"></div>
          
          <!-- Top Accent Line -->
          <div class="absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r {{ tier.bgGradient }} opacity-0 group-hover:opacity-100 transition-opacity"></div>
          
          <!-- Tier Icon with Glow -->
          <div class="w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-lg sm:rounded-xl bg-gradient-to-br {{ tier.bgGradient }} flex items-center justify-center mb-2 sm:mb-3 md:mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg group-hover:shadow-xl">
            <span class="material-symbols-outlined text-white text-lg sm:text-xl md:text-2xl">{{ tier.icon }}</span>
          </div>

          <!-- Tier Name -->
          <h4 class="font-black text-xs sm:text-sm md:text-lg {{ tier.color }} uppercase tracking-tight mb-1">
            {{ tier.name }}
          </h4>

          <!-- Referrals Range -->
          <p class="text-[10px] sm:text-[11px] md:text-xs text-gray-500 mb-2 sm:mb-3">
            {{ tier.maxReferrals ? tier.minReferrals + '-' + tier.maxReferrals : tier.minReferrals + '+' }} invitados
          </p>

          <!-- Earnings Preview -->
          <div class="pt-2 sm:pt-3 border-t border-zinc-700/50">
            <p class="text-[9px] sm:text-[10px] md:text-xs text-gray-500 uppercase tracking-wide mb-1">Ganancias Aprox.</p>
            <p class="font-black text-green-400 text-base sm:text-lg md:text-xl">{{ tier.monthlyEarnings }}</p>
          </div>

          <!-- Hover Arrow -->
          <div class="absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-x-2 group-hover:translate-x-0">
            <span class="material-symbols-outlined text-cyan-400 text-xl">arrow_forward</span>
          </div>
        </button>
      }
    </div>

    <!-- Call to Action -->
    <div class="text-center mt-10 md:mt-14">
      <p class="text-gray-400 text-sm md:text-base mb-4">
        ¿Quieres ver exactamente cuánto podrías ganar?
      </p>
      <a 
        routerLink="/register" 
        class="inline-flex items-center space-x-2 bg-cyan-500 hover:bg-cyan-400 text-black font-bold py-3 px-6 md:px-8 rounded-full transition-all shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 hover:scale-105"
      >
        <span>Regístrate y calcula tus ganancias</span>
        <span class="material-symbols-outlined">arrow_forward</span>
      </a>
    </div>
  </div>

  <!-- Tier Detail Modal -->
  @if (selectedTierFormatted()) {
    <div class="fixed inset-0 z-50 flex items-center justify-center p-4">
      <!-- Backdrop -->
      <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" (click)="closeTierDetail()"></div>
      
      <!-- Modal Content -->
      <div class="relative bg-zinc-900 rounded-2xl max-w-md w-full p-6 md:p-8 shadow-2xl border border-zinc-800">
        <button 
          (click)="closeTierDetail()" 
          class="absolute top-3 right-3 text-gray-400 hover:text-white transition-colors p-1"
        >
          <span class="material-symbols-outlined">close</span>
        </button>
        
        <!-- Tier Header -->
        <div class="text-center mb-6">
          <div class="w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br {{ selectedTierFormatted()!.bgGradient }} flex items-center justify-center mb-4 shadow-xl">
            <span class="material-symbols-outlined text-white text-4xl">{{ selectedTierFormatted()!.icon }}</span>
          </div>
          <h3 class="text-3xl font-black {{ selectedTierFormatted()!.color }} uppercase">
            {{ selectedTierFormatted()!.name }}
          </h3>
          <p class="text-gray-500 text-sm mt-2">
            {{ selectedTierFormatted()!.maxReferrals ? selectedTierFormatted()!.minReferrals + ' - ' + selectedTierFormatted()!.maxReferrals : selectedTierFormatted()!.minReferrals + '+' }} invitados activos
          </p>
        </div>
        
        <!-- Earnings Breakdown -->
        <div class="space-y-3">
          <div class="flex justify-between items-center p-4 bg-zinc-800/50 rounded-xl border border-zinc-700/50">
            <span class="text-gray-400 text-sm">Tus propios clicks</span>
            <span class="font-bold text-white text-lg">{{ selectedTierFormatted()!.ownClicks }}</span>
          </div>
          <div class="flex justify-between items-center p-4 bg-zinc-800/50 rounded-xl border border-zinc-700/50">
            <span class="text-gray-400 text-sm">Clicks de tus invitados</span>
            <span class="font-bold text-white text-lg">{{ selectedTierFormatted()!.referralClicks }}</span>
          </div>
          <div class="flex justify-between items-center p-4 bg-cyan-500/10 rounded-xl border border-cyan-500/30">
            <span class="text-cyan-400 font-bold">Total aproximado al mes</span>
            <span class="font-black text-cyan-400 text-xl">{{ selectedTierFormatted()!.monthlyEarnings }}</span>
          </div>
        </div>
        
        <!-- CTA -->
        <a 
          routerLink="/register"
          class="block text-center mt-6 bg-gradient-to-r from-cyan-500 to-cyan-400 hover:from-cyan-400 hover:to-cyan-300 text-black font-bold py-4 rounded-xl transition-all shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50"
        >
          ¡Alcanza este nivel!
        </a>
      </div>
    </div>
  }
</section>
