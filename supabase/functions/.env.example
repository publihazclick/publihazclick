# =============================================================================
# Variables de entorno para las Edge Functions de Supabase
# Copia este archivo como .env (para desarrollo local) y configura las
# variables reales en Supabase Dashboard → Settings → Edge Functions → Secrets
# =============================================================================

# ── Supabase (se configuran automáticamente en producción) ────────────────────
SUPABASE_URL=https://tu-proyecto.supabase.co
SUPABASE_SERVICE_ROLE_KEY=tu-service-role-key

# ── Wompi ─────────────────────────────────────────────────────────────────────
# Sandbox (pruebas):
#   https://sandbox.wompi.co/v1
# Producción:
#   https://production.wompi.co/v1

WOMPI_BASE_URL=https://sandbox.wompi.co/v1

# Llaves disponibles en: https://comercios.wompi.co → Configuración → Llaves API
WOMPI_PUBLIC_KEY=pub_stagtest_XXXXXXXXXX
WOMPI_PRIVATE_KEY=prv_stagtest_XXXXXXXXXX
WOMPI_EVENTS_SECRET=stagtest_events_XXXXXXXXXX

# ── Tasa de cambio USD → COP (opcional, se consulta en tiempo real si está vacío)
# Actualizar manualmente si la tasa varía mucho
USD_TO_COP_RATE=

# ── dLocal Go ─────────────────────────────────────────────────────────────────
# Credenciales en: https://dashboard.dlocalgo.com → Configuración → API Keys
# Sandbox: https://api-sbx.dlocalgo.com  |  Producción: https://api.dlocalgo.com

DLOCAL_API_KEY=LfgpXOjLuGEfoCGUijgPrVLaJkROxRRT
DLOCAL_SECRET_KEY=6NoTKcJDpO25JBXJx6fgAWvZhvMvrCiihT9ooTM2
DLOCAL_SMARTFIELDS_KEY=64a4f571-d6a3-11f0-b386-0affcf7ce151

# URL base de la API (dejar en producción para producción, cambiar a sandbox para pruebas)
DLOCAL_BASE_URL=https://api.dlocalgo.com

# URL pública del frontend (para redirect_url y back_url del pago)
APP_URL=https://publihazclick.com

# =============================================================================
# Comandos útiles
# =============================================================================
# Autenticar CLI (requerido una vez):
#   supabase login
#
# Configurar secrets en Supabase (project-ref: btkdmdhzouzvzgyuzgbh):
#   supabase secrets set DLOCAL_API_KEY=LfgpXOjLuGEfoCGUijgPrVLaJkROxRRT \
#     DLOCAL_SECRET_KEY=6NoTKcJDpO25JBXJx6fgAWvZhvMvrCiihT9ooTM2 \
#     DLOCAL_SMARTFIELDS_KEY=64a4f571-d6a3-11f0-b386-0affcf7ce151 \
#     APP_URL=https://publihazclick.com \
#     --project-ref btkdmdhzouzvzgyuzgbh
#
#   supabase secrets set WOMPI_PRIVATE_KEY=prv_stagtest_XXXX \
#     --project-ref btkdmdhzouzvzgyuzgbh
#
# Ver secrets configurados:
#   supabase secrets list --project-ref btkdmdhzouzvzgyuzgbh
#
# Desplegar funciones:
#   supabase functions deploy create-dlocal-payment --project-ref btkdmdhzouzvzgyuzgbh
#   supabase functions deploy dlocal-webhook --project-ref btkdmdhzouzvzgyuzgbh
#   supabase functions deploy create-nequi-payment --project-ref btkdmdhzouzvzgyuzgbh
#
# Probar localmente:
#   supabase functions serve create-dlocal-payment --env-file ./supabase/functions/.env
# =============================================================================
